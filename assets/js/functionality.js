"use strict";function _newArrowCheck(e,a){if(e!==a)throw new TypeError("Cannot instantiate an arrow function")}var btns=document.querySelectorAll("#right > div"),queryBar=document.querySelector("#left input"),bangs=[{bang:"apkg",name:"Archlinux packages"},{bang:"archpkg",name:"Archlinux packages"},{bang:"arch",name:"Archlinux wiki"},{bang:"archwiki",name:"Archlinux wiki"},{bang:"archaur",name:"Archlinux AUR"},{bang:"aur",name:"Archlinux AUR"},{bang:"archlinux",name:"Archlinux Forum"},{bang:"archforum",name:"Archlinux Forum"},{bang:"w",name:"Wikipedia"},{bang:"wiki",name:"Wikipedia"},{bang:"bulba",name:"Bulbapedia"},{bang:"yt",name:"YouTube"},{bang:"youtube",name:"YouTube"},{bang:"ytor",name:"YouTube on Repeat"},{bang:"youtubeonrepeat",name:"YouTube on Repeat"},{bang:"gh",name:"Github"},{bang:"github",name:"Github"},{bang:"glab",name:"Gitlab"},{bang:"gitlab",name:"Gitlab"},{bang:"latexwb",name:"LaTeX Wikibooks"},{bang:"ctan",name:"CTAN"},{bang:"crates",name:"Crates.io"},{bang:"cargo",name:"Crates.io"},{bang:"rust",name:"Rust stdlib docs"},{bang:"rustdoc",name:"Rust docs"},{bang:"js",name:"MDN JS Documentation"},{bang:"css",name:"MDN CSS Documentation"},{bang:"csst",name:"CSS Tricks"},{bang:"r",name:"Reddit"},{bang:"subr",name:"Subreddits"},{bang:"subreddit",name:"Subreddits"},{bang:"dictionaryr",name:"Dictionary.com (reference)"},{bang:"thes",name:"Thesaurus.com"},{bang:"thesaurus",name:"Thesaurus.com"},{bang:"wa",name:"Wolfram Alpha"},{bang:"wolfram",name:"Wolfram Alpha"},{bang:"wolf",name:"Wolfram Alpha"},{bang:"math",name:"Wolfram Mathworld"},{bang:"mathworld",name:"Wolfram Mathworld"}];window.location.href.includes("http://localhost")?window.data=getJSON("/bookmarks.json"):window.data=getJSON("/elementary/bookmarks.json");for(var i=0;i<btns.length;i++)btns[i].addEventListener("mouseover",function(){document.querySelector("#right > .active").classList.remove("active"),this.classList+="active",document.querySelector("#left > .active").classList.remove("active"),document.querySelector("#left > #"+this.getAttribute("id")+"-content").classList+="active"});function bookmarks(){window.data.then(function(e){for(var a in e){var n=a,t=document.querySelector("#"+n+"-content .content-container p");for(var r in a=e[a]){var o="<a tabindex='-1' href='"+(r=a[r]).url+"'>"+r.title+"</a> ";t.innerHTML+=o}}})}document.onkeyup=function(e){if(e.shiftKey&&49==e.keyCode){var a=document.querySelector("#right > .active");"search"!==a.getAttribute("id")&&(a.classList.remove("active"),document.querySelector("#right > #search").classList+="active",document.querySelector("#left > .active").classList.remove("active"),document.querySelector("#left > #search-content").classList+="active"),queryBar.focus()}},queryBar.onkeydown=function(e){var t=this;"Enter"==e.key?hasProtocol(t.value)?window.location.href=t.value:hasName(t.value)?window.location.href="https://"+t.value:0==t.value.indexOf("/r/")||0==t.value.indexOf("r/")?0==t.value.indexOf("/")?window.location.href="https://reddit.com"+t.value:window.location.href="https://reddit.com/"+t.value:0==t.value.indexOf("qw ")?window.location.href="https://lite.qwant.com/?q="+t.value.substring(3,t.length):window.location.href="https://duckduckgo.com/?q="+t.value:9==e.keyCode&&(e.preventDefault(),"ht"==t.value?t.value="https://":window.data.then(function(e){for(var a in e)for(var n in a=e[a])-1<(n=a[n]).url.indexOf(t.value.toLowerCase())&&(t.value=n.url)}))},queryBar.onkeyup=function(e){if(""===this.value)cleanBangMatches();else if("!"===this.value.charAt(0)){var a=checkbang(this.value.substring(1));showBangMatches(a),0===a.length&&cleanBangMatches(),9===e.keyCode&&(this.value="!"+a[0].bang)}};var $datetime_day=document.querySelector(".datetime-day"),$datetime_time=document.querySelector(".datetime-time");function clock(){var e,a=new Date,n=a.getHours(),t=a.getMinutes(),r=a.getSeconds();switch(n=(n<10?"0":"")+n,t=(t<10?"0":"")+t,r=(r<10?"0":"")+r,a.getDay()){case 0:e="日";break;case 1:e="月";break;case 2:e="火";break;case 3:e="水";break;case 4:e="木";break;case 5:e="金";break;case 6:e="土";break;default:e=" "}if(r%2==0)var o=n+":"+t+":"+r;else o=n+" "+t+" "+r;$datetime_time.innerHTML=o,$datetime_day.innerHTML=e}function hasName(e){for(var a=[".com",".org",".io",".net",".ca",".ink"],n=0;n<a.length;n++)if(0<e.indexOf(a[n]))return!0;return!1}function hasProtocol(e){for(var a=["http://","https://","file://"],n=0;n<a.length;n++)if(0==e.indexOf(a[n]))return!0;return!1}function getJSON(o){return new Promise(function(e,a){var n=o.split("/")[1];if(null===window.sessionStorage.getItem(n)){var t=new XMLHttpRequest;t.open("GET",o,!0),t.responseType="json",t.onload=function(){t.readyState===XMLHttpRequest.DONE&&(200===t.status?(window.sessionStorage.setItem(n,JSON.stringify(t.response)),e(t.response)):a(t.status))},t.send()}else{var r=JSON.parse(window.sessionStorage.getItem(n));e(r)}})}function checkbang(a){var n=this;return bangs.filter(function(e){return _newArrowCheck(this,n),e.bang.includes(a)}.bind(this))}function showBangMatches(e){var r=this,a=document.querySelector("#left > #search-content"),n=document.querySelector(".bang-matches");null===n&&((n=document.createElement("div")).classList.add("bang-matches"),a.appendChild(n));var o=document.querySelector(".bang-matches ul");if(null===o)o=document.createElement("ul"),n.appendChild(o);else for(;o.hasChildNodes();)o.removeChild(o.lastChild);e.forEach(function(e){_newArrowCheck(this,r);var a=document.createElement("b");a.innerHTML="!"+e.bang;var n=document.createElement("span");n.innerHTML=e.name;var t=document.createElement("li");t.appendChild(a),t.appendChild(n),o.appendChild(t)}.bind(this))}function cleanBangMatches(){var e=document.querySelector(".bang-matches");null!==e&&e.parentNode.removeChild(e)}bookmarks(),clock(),setInterval(clock,1e3);